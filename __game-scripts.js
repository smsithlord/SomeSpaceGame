var Ui=pc.createScript("ui");Ui.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),Ui.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),Ui.prototype.initialize=function(){var t=document.createElement("style");document.head.appendChild(t),t.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.innerHTML=this.html.resource||"",document.body.appendChild(this.div)};pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #283538;","}","","#application-canvas {","    z-index: 2;","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #283538;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    width: 100%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #1d292c;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #f60;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("img");a.src="https://playcanvas.com/static-assets/images/play_text_252_white.png",t.appendChild(a),a.onload=function(){t.style.display="block"};var n=document.createElement("div");n.id="progress-bar-container",t.appendChild(n);var p=document.createElement("div");p.id="progress-bar",n.appendChild(p)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));var KeyboardHandler=pc.createScript("keyboardHandler");KeyboardHandler.prototype.initialize=function(){let e=new pc.Controller(document);e.registerKeys("up",[pc.KEY_UP,pc.KEY_W]),e.registerKeys("down",[pc.KEY_DOWN,pc.KEY_S]),e.registerKeys("left",[pc.KEY_LEFT,pc.KEY_A]),e.registerKeys("right",[pc.KEY_RIGHT,pc.KEY_D]),e.registerKeys("fire",[pc.KEY_ENTER,pc.KEY_SPACE]),this.app.controller=e};var Player=pc.createScript("player");Player.attributes.add("guns",{type:"entity",array:!0}),Player.attributes.add("bullet",{type:"asset",assetType:"template"}),Player.prototype.initialize=function(){this.app.player=this,this.bullets={},this.app.on("player:fire",this.fireGuns,this)},Player.prototype.update=function(t){let e=this.app.controller,s=0,i=0;e.isPressed("left")&&(s+=-1),e.isPressed("right")&&(s+=1),e.isPressed("up")&&(i+=-1),e.isPressed("down")&&(i+=1);this.entity.translateLocal(6*s*t,0,6*i*t),e.wasPressed("fire")&&this.app.fire("player:fire")},Player.prototype.removeBullet=function(t){this.bullets[t].destroy(),delete this.bullets[t]},Player.prototype.fireGuns=function(){let t=this.bullet.resource.instantiate(),e=this.guns[0].getPosition(),s=this.guns[0].getRotation();t.setPosition(e.x,e.y,e.z),t.setRotation(s),this.bullets[t._guid]=t,this.app.root.addChild(t)};var Bullet=pc.createScript("bullet");Bullet.prototype.initialize=function(){},Bullet.prototype.update=function(t){this.entity.translateLocal(0,0,10*t);this.entity.getPosition().distance(this.app.player.entity.getPosition())>16&&this.app.player.removeBullet(this.entity._guid)};var Enemy=pc.createScript("enemy");Enemy.prototype.initialize=function(){this.health=40,this.hitRadius=1},Enemy.prototype.hit=function(t){this.health-=10,this.health<=0?(this.health=0,this.blowUp()):(this.app.player.removeBullet(t._guid),this.takeDamage())},Enemy.prototype.takeDamage=function(){console.log("enemy dmged")},Enemy.prototype.blowUp=function(){console.log("enemy destroyed!"),this.entity.destroy()},Enemy.prototype.update=function(t){let e,i=this.entity.getPosition(),o=this.app.player.bullets;for(let t in o)e=o[t],e.getPosition().distance(i)<this.hitRadius&&this.hit(e)},Enemy.prototype.postUpdate=function(t){this.entity.translateLocal(0,0,2*t)};